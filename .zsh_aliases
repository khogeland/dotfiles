### Dotfiles ###
alias reload="source ~/.zshrc"
alias editrc="$EDITOR ~/.zshrc; reload"
alias vimrc="vim ~/.vimrc"

### Maven ###
require mvn && {
    alias mci='mvn clean install'
    alias mcp='mvn clean package'
    alias mdt='mvn dependency:tree'
}

### Sudo ###
alias ,='sudo '
alias ,,='history | tail -n 1 | cut -c 8- | sudo -i'

### Screen ###
require screen && {
    alias ssx='screen -x -S '
    alias ss='screen -S '
}

### Git ###
alias gad='git add .'
alias gds='git diff --staged'
alias gcur='git_current_branch'
alias gdh='git diff HEAD~1..HEAD'

### Nim ###
require nim && {
    alias nr='nim c -r --verbosity:0 --threads:on'
    function nimi {
        nim c -d:release --threads:on "-o:$NIMBIN/"`basename "$1" .nim` "$1"
    }
}

### NVIM ###
require nvim && {
    alias vi='nvim'
    alias vim='nvim'
    require nvr && {
        alias vi='_nvim'
        alias vim='_nvim'
        function _nvim {
            if [ "$NVIM_LISTEN_ADDRESS" = "" ]; then
                nvim $@
            else
                # Making wild assumptions here
                nvr -o $@
            fi
        }
    }
}

### Misc ###

require irssi run-one screen && function irc { screen -dRmS irc run-one irssi }

require vim && alias vi='vim'
require rsync && alias rsyncp='rsync -avz --no-i-r --info=progress2'
alias c=clear
alias re='grep -oP'
alias wh=whence
alias psg='ps aux | grep -i'
alias af='alias | grep'
alias t='type -a'

function linux_aliases {
    require google-chrome-stable && alias chrome='google-chrome-stable %U --high-dpi-support=1 --force-device-scale-factor=1.2'
}

function mac_aliases {
    alias chrome-dev="open -a Google\ Chrome --args --disable-web-security --user-data-dir"
    alias flushdns="sudo discoveryutil mdnsflushcache"
    alias ij='open -b com.jetbrains.intellij.ce'
}

case "$OSTYPE" in
  darwin*); mac_aliases;;
  linux*); linux_aliases;;
esac
unset -f linux_aliases
unset -f mac_aliases
